<VirtualHost *:80>
  ServerAdmin steph.pythoud@bluewin.ch
  ServerName  www.piccoleau.ch
  ServerAlias piccoleau.ch

  # Index file and Document Root (where the public files are located)
  #DirectoryIndex index.html
  DocumentRoot /var/www/piccoleau.ch

  <Location />
    RewriteEngine On

    # SEO: redirect bot requests to HTML snapshots
    RewriteCond %{REQUEST_URI}  ^/$
    RewriteCond %{QUERY_STRING} ^_escaped_fragment_=/?(.*)$
    RewriteRule ^(.*)$ %{DOCUMENT_ROOT}/snapshots/%1.html [NC,L]

    # Support HTML 5 mode for Angular routing
    RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
    RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
    RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !index
    RewriteRule (.*) index.html [L]
  </Location>

  # Log file locations
  LogLevel warn rewrite:trace8
  ErrorLog  /var/log/apache2/piccoleau.ch/error.log
  CustomLog /var/log/apache2/piccoleau.ch/access.log combined

</VirtualHost>