<VirtualHost *:80>
  ServerAdmin steph.pythoud@bluewin.ch
  ServerName  www.piccoleau.ch
  ServerAlias piccoleau.ch

  # Index file and Document Root (where the public files are located)
  #DirectoryIndex index.html
  DocumentRoot /var/www/piccoleau.ch

  <Directory "/var/www/piccoleau.ch">
    RewriteEngine On

    # SEO: redirect bot requests to HTML snapshots
    RewriteCond %{REQUEST_URI}  ^/$
    RewriteCond %{QUERY_STRING} ^_escaped_fragment_=/?(.*)$
    RewriteRule ^(.*)$ /snapshots/%1.html [NC,END]

    # Support HTML 5 mode for Angular routing
    # RewriteCond %{REQUEST_FILENAME} -f [OR]
    # RewriteCond %{REQUEST_FILENAME} -d [OR]
    # RewriteCond %{REQUEST_FILENAME} -l [OR]
    # RewriteRule ^.*$ - [NC,L]
    # RewriteRule ^.*$ /index.html [NC,L]
  </Directory>

  # Log file locations
  LogLevel warn rewrite:trace8
  ErrorLog  /var/log/apache2/piccoleau.ch/error.log
  CustomLog /var/log/apache2/piccoleau.ch/access.log combined

</VirtualHost>